---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Welcome to Astro.">
    <main>
        <div class="page-wrapper">
            <!-- Content wrapper start -->
            <div class="content-wrapper">
                <!--
					Add your page's main content here
					Examples:
					1. https://www.gethalfmoon.com/docs/content-and-cards/#building-a-page
					2. https://www.gethalfmoon.com/docs/grid-system/#building-a-dashboard
				-->

                <div class="container-fluid">
                    <div
                        class="d-flex align-items-center justify-content-center hero"
                    >
                        <div class="content" style="max-width: 500px">
                            <h1 class="content-title text-muted text-center">
                                Today's EA Star Wars Battlefront II Event:
                            </h1>
                            <h2
                                id="todays-event-name"
                                class="content-title text-center"
                            >
                            </h2>
                            <p
                                id="todays-event-description"
                                class="text-center"
                            >
                            </p>
                            <div
                                id="todays-event-game-modes"
                                class="text-center"
                            >
                            </div>
                            <p class="text-center text-muted countdown"></p>
                        </div>
                    </div>
                </div>

                <div class="container">
                    <div class="row">
                        <div class="col-sm-12">
                            <h2>Weekly events</h2>
                        </div>
                        <div class="col-sm-12 col-md-6">
                            <div class="card p-0">
                                <img
                                    class="img-fluid rounded-top"
                                    loading="lazy"
                                    src="./images/swbf2/fast-spawn-event.320w.jpg"
                                    srcset="
										./images/swbf2/fast-spawn-event.320w.jpg   320w,
										./images/swbf2/fast-spawn-event.767w.jpg   768w,
										./images/swbf2/fast-spawn-event.1023w.jpg 1024w,
										./images/swbf2/fast-spawn-event.1455w.jpg 1320w,
										./images/swbf2/fast-spawn-event.1920w.jpg 1456w
									"
                                    alt="Star Wars Battlefront II Event: Fast Spawn Event"
                                />
                                <div class="content">
                                    <h2 class="content-title text-muted m-0">
                                        Mondays
                                    </h2>
                                    <h3 class="content-title">
                                        Fast Spawn Event
                                    </h3>
                                    <p>
                                        Spawn timers will be set to 1 sec long
                                        in assault modes for the duration of the
                                        event.
                                    </p>
                                    <div>
                                        <span class="badge"
                                            >Galactic Assault</span
                                        >
                                        <span class="badge"
                                            >Capital Supremacy</span
                                        >
                                        <span class="badge"
                                            >Starfighter Assault</span
                                        >
                                        <span class="badge">Extraction</span>
                                        <span class="badge">Strike</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12 col-md-6">
                            <div class="card p-0">
                                <img
                                    class="img-fluid rounded-top"
                                    loading="lazy"
                                    src="./images/swbf2/midweek-boost.320w.jpg"
                                    srcset="
										./images/swbf2/midweek-boost.320w.jpg   320w,
										./images/swbf2/midweek-boost.767w.jpg   768w,
										./images/swbf2/midweek-boost.1023w.jpg 1024w,
										./images/swbf2/midweek-boost.1455w.jpg 1320w,
										./images/swbf2/midweek-boost.1920w.jpg 1456w
									"
                                    alt="Star Wars Battlefront II Event: Midweek Boost"
                                />
                                <div class="content">
                                    <h2 class="content-title text-muted m-0">
                                        Wednesdays
                                    </h2>
                                    <h3 class="content-title">Midweek Boost</h3>
                                    <p>
                                        Triple XP for faster ranking
                                        progression.
                                    </p>
                                    <div>
                                        <span class="badge">All game modes</span
                                        >
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12 col-md-6">
                            <div class="card p-0">
                                <img
                                    class="img-fluid rounded-top"
                                    loading="lazy"
                                    src="./images/swbf2/battle-point-event.320w.jpg"
                                    srcset="
										./images/swbf2/battle-point-event.320w.jpg   320w,
										./images/swbf2/battle-point-event.767w.jpg   768w,
										./images/swbf2/battle-point-event.1023w.jpg 1024w,
										./images/swbf2/battle-point-event.1455w.jpg 1320w,
										./images/swbf2/battle-point-event.1920w.jpg 1456w
									"
                                    alt="Star Wars Battlefront II Event: Battle Point Event"
                                />
                                <div class="content">
                                    <h2 class="content-title text-muted m-0">
                                        Fridays
                                    </h2>
                                    <h3 class="content-title">
                                        Battle Point Event
                                    </h3>
                                    <p>
                                        Lower Battle Point costs for all
                                        reinforcements and increased numbers
                                        allowed at a time.
                                    </p>
                                    <div>
                                        <span class="badge"
                                            >Galactic Assault</span
                                        >
                                        <span class="badge"
                                            >Capital Supremacy</span
                                        >
                                        <span class="badge">Extraction</span>
                                        <span class="badge">Strike</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12 col-md-6">
                            <div class="card p-0">
                                <img
                                    class="img-fluid rounded-top"
                                    loading="lazy"
                                    src="./images/swbf2/weekend-boost.320w.jpg"
                                    srcset="
										./images/swbf2/weekend-boost.320w.jpg   320w,
										./images/swbf2/weekend-boost.767w.jpg   768w,
										./images/swbf2/weekend-boost.1023w.jpg 1024w,
										./images/swbf2/weekend-boost.1455w.jpg 1320w,
										./images/swbf2/weekend-boost.1920w.jpg 1456w
									"
                                    alt="Star Wars Battlefront II Event: Weekend Boost"
                                />
                                <div class="content">
                                    <h2 class="content-title text-muted m-0">
                                        Saturdays + Sundays
                                    </h2>
                                    <h3 class="content-title">Weekend Boost</h3>
                                    <p>
                                        Double XP for faster ranking
                                        progression.
                                    </p>
                                    <div>
                                        <span class="badge">All game modes</span
                                        >
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-12">
                            <h2>Special events</h2>
                        </div>
                        <div class="col-sm-12 col-md-6">
                            <div class="card p-0">
                                <img
                                    class="img-fluid rounded-top"
                                    loading="lazy"
                                    src="./images/swbf2/battle-point-event-unlimited-power.320w.jpg"
                                    srcset="
										./images/swbf2/battle-point-event-unlimited-power.320w.jpg   320w,
										./images/swbf2/battle-point-event-unlimited-power.767w.jpg   768w,
										./images/swbf2/battle-point-event-unlimited-power.1023w.jpg 1024w,
										./images/swbf2/battle-point-event-unlimited-power.1455w.jpg 1320w,
										./images/swbf2/battle-point-event-unlimited-power.1920w.jpg 1456w
									"
                                    alt="Star Wars Battlefront II Event: Battle Point Event: Unlimited Power"
                                />
                                <div class="content">
                                    <h2 class="content-title text-muted m-0">
                                        Jan 1st + May 4th
                                    </h2>
                                    <h3 class="content-title">
                                        Battle Point Event: Unlimited Power
                                    </h3>
                                    <p>
                                        90% off the Battle Point cost for
                                        everything, increased number of
                                        Reinforcements and Heroes available
                                        simultaneously, with Fast Spawn timers
                                        and Double XP in effect.
                                    </p>
                                    <div>
                                        <span class="badge"
                                            >Galactic Assault</span
                                        >
                                        <span class="badge"
                                            >Capital Supremacy</span
                                        >
                                        <span class="badge">Extraction</span>
                                        <span class="badge">Strike</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 text-center">
                            <h2>About</h2>
                        </div>
                        <div class="col-sm-12">
                            <div
                                style="margin: auto; max-width: 500px"
                                class="content text-center"
                            >
                                <p>
                                    A calendar of current and upcoming community
                                    events in EA Star Wars Battlefront II
                                    (2017). See today's SWBF2 community event,
                                    and the upcoming SWBF2 community event
                                    schedule.
                                </p>
                                <p>
                                    SWBF2 community events start at 00:01am CET
                                    and conclude the following day at 06:00am
                                    CET, with the exception of Weekend Boost,
                                    which starts at 06:00am Saturday CET and
                                    ends at 11:59pm Sunday CET.
                                </p>
                                <p>
                                    All SWBF2 community events last for a total
                                    of 30 hours.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <nav
                    class="navbar navbar-static-bottom justify-content-between p-10 flex-column"
                    style={{ height: "auto" }}
                >
                    <div class="navbar-text">
                        <div class="flex center">
                            Made with <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 496 512"
                                style="width: 1em; height: 1em; vertical-align: middle; fill: currentColor;"
                                aria-labelledby="iconTitle"
                            >
                                ><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                                <path
                                    d="M248 504C111.3 504 0 392.8 0 256S111.3 8 248 8s248 111.3 248 248-111.3 248-248 248zm0-479.5C120.4 24.5 16.5 128.4 16.5 256S120.4 487.5 248 487.5 479.5 383.6 479.5 256 375.6 24.5 248 24.5zm27.6 21.8v24.6a185.9 185.9 0 0 1 83.6 34.5l17.4-17.4c-28.8-22.1-63.3-36.9-101-41.8zm-55.4 .1c-37.6 4.9-72.2 19.8-100.9 41.9l17.3 17.4h.1c24.1-17.8 52.6-30.1 83.5-34.7V46.4zm12.3 50.2v82.9c-10 2-19.4 5.9-27.7 11.4l-58.6-58.6-21.9 21.9 58.7 58.7c-5.5 8.2-9.5 17.6-11.5 27.6h-82.9v31h82.9c2 10 6 19.3 11.5 27.5l-58.7 58.7 21.9 21.9 58.6-58.6a77.9 77.9 0 0 0 27.7 11.5v82.9h31v-82.9c10.1-2 19.4-6.1 27.6-11.6l58.7 58.7 21.9-21.9-58.7-58.7c5.5-8.2 9.5-17.5 11.5-27.5h82.9v-31h-82.9c-2-10-6-19.4-11.5-27.6l58.7-58.7-21.9-21.9-58.7 58.7c-8.3-5.5-17.6-9.5-27.6-11.5V96.6h-31zm183.2 30.7l-17.4 17.4a186.3 186.3 0 0 1 34.7 83.7h24.6c-5-37.7-19.8-72.3-41.9-101zm-335.6 .1c-22.1 28.7-36.9 63.3-41.9 100.9h24.7c4.6-31 16.8-59.5 34.6-83.5l-17.4-17.4zM38.3 283.7c4.9 37.6 19.8 72.2 41.8 100.9l17.4-17.4c-17.8-24.1-29.9-52.6-34.5-83.5H38.3zm394.7 0c-4.6 31-16.8 59.5-34.7 83.6l17.4 17.4c22.1-28.7 37-63.3 41.9-101h-24.6zM136.7 406.4l-17.4 17.4c28.7 22.1 63.3 37 101 41.9v-24.6c-31-4.6-59.5-16.8-83.6-34.7zm222.5 .1c-24.1 17.8-52.6 30.1-83.6 34.7v24.6c37.7-4.9 72.2-19.8 101-41.9l-17.3-17.4h-.1z"
                                ></path>
                                <title id="iconTitle">the force</title>
                            </svg> by
                            <a
                                href="https://joeduncko.com"
                                target="_blank"
                                rel="noopener">Joe Duncko</a
                            >
                        </div>
                    </div>

                    <div class="navbar-text">
                        <div>
                            Star Wars Battlefront II
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 512 512"
                                style="width: 1em; height: 1em; vertical-align: middle; fill: currentColor;"
                                aria-labelledby="iconTitle"
                                ><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                                <path
                                    d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM199.4 312.6c31.2 31.2 81.9 31.2 113.1 0c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9c-50 50-131 50-181 0s-50-131 0-181s131-50 181 0c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0c-31.2-31.2-81.9-31.2-113.1 0s-31.2 81.9 0 113.1z"
                                ></path>
                                <title id="iconTitle">copyright</title>
                            </svg> Electronic Arts Inc.
                        </div>
                    </div>

                    <div
                        class="navbar-text d-flex align-items-center"
                        style={{ gap: ".5em" }}
                    >
                        <a
                            href="https://github.com/JoeDuncko/easwbf2-events"
                            target="_blank"
                            referrerpolicy="origin"
                            rel="noopener"
                            ><svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 384 512"
                                style="width: 1em; height: 1em; vertical-align: middle; fill: currentColor;"
                                aria-labelledby="iconTitle"
                                ><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                                <path
                                    d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"
                                ></path>
                                <title id="iconTitle">Fork this website.</title>
                            </svg></a
                        >
                        <a
                            href="https://simpleanalytics.com/swbf2.events?utm_source=swbf2.events"
                            target="_blank"
                            referrerpolicy="origin"
                            rel="noopener"
                            ><svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 512 512"
                                style="width: 1em; height: 1em; vertical-align: middle; fill: currentColor;"
                                aria-labelledby="iconTitle"
                                ><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
                                <path
                                    d="M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.8-7.2-16-16-16H16C7.2 64 0 71.2 0 80v336c0 17.7 14.3 32 32 32h464c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16z"
                                ></path>
                                <title id="iconTitle">
                                    View SimpleAnalytics.
                                </title>
                            </svg></a
                        >
                    </div>
                </nav>
            </div>
            <!-- Content wrapper end -->
        </div>
        <!-- Page wrapper end -->
    </main>
</Layout>

<script>
    import {
        addDays,
        addHours,
        endOfDay,
        isFriday,
        isMonday,
        isSameDay,
        isSaturday,
        isSunday,
        isThursday,
        isTuesday,
        isWednesday,
        parse,
        startOfDay,
    } from "date-fns";

    import { toZonedTime } from "date-fns-tz";

    // TODO: fuse getEndOfEvent and isEventRunning and getBeginningOfEvent
    const events = [
        {
            isEventRunning: (date: Date) => {
                const jan1st = parse(
                    `${new Date().getFullYear()}-1-1`,
                    "y-M-d",
                    new Date()
                );
                const jan2nd = parse(
                    `${new Date().getFullYear()}-1-2`,
                    "y-M-d",
                    new Date()
                );
                const may4th = parse(
                    `${new Date().getFullYear()}-5-4`,
                    "y-M-d",
                    new Date()
                );
                const may5th = parse(
                    `${new Date().getFullYear()}-5-5`,
                    "y-M-d",
                    new Date()
                );

                return (
                    isSameDay(date, jan1st) ||
                    (isSameDay(date, jan2nd) && date.getHours() < 6) ||
                    isSameDay(date, may4th) ||
                    (isSameDay(date, may5th) && date.getHours() < 6)
                );
            },
            getEndOfEvent: (date: Date) => {
                const jan1st = parse(
                    `${new Date().getFullYear()}-1-1`,
                    "y-M-d",
                    new Date()
                );
                const jan2nd = parse(
                    `${new Date().getFullYear()}-1-2`,
                    "y-M-d",
                    new Date()
                );
                const may4th = parse(
                    `${new Date().getFullYear()}-5-4`,
                    "y-M-d",
                    new Date()
                );
                const may5th = parse(
                    `${new Date().getFullYear()}-5-5`,
                    "y-M-d",
                    new Date()
                );

                if (isSameDay(date, jan1st)) {
                    return addHours(endOfDay(date), 6);
                } else if (isSameDay(date, jan2nd) && date.getHours() < 6) {
                    return addHours(startOfDay(date), 6);
                } else if (isSameDay(date, may4th)) {
                    return addHours(endOfDay(date), 6);
                } else if (isSameDay(date, may5th) && date.getHours() < 6) {
                    return addHours(startOfDay(date), 6);
                }

                throw new Error("This should never happen");
            },
            name: "Battle Point Event: Unlimited Power",
            description:
                "90% off the Battle Point cost for everything, increased number of Reinforcements and Heroes available simultaneously, with Fast Spawn timers and Double XP in effect.",
            gameModes: [
                "Galactic Assault",
                "Capital Supremacy",
                "Extraction",
                "Strike",
            ],
        },
        {
            isEventRunning: (date: Date) =>
                isMonday(date) || (isTuesday(date) && date.getHours() < 6),
            getEndOfEvent: (date: Date) => {
                if (isMonday(date)) {
                    return addHours(endOfDay(date), 6);
                } else if (isTuesday(date) && date.getHours() < 6) {
                    return addHours(startOfDay(date), 6);
                }

                throw new Error("This should never happen");
            },
            name: "Fast Spawn Event",
            description:
                "Spawn timers will be set to 1 sec long in assault modes for the duration of the event.",
            gameModes: [
                "Galactic Assault",
                "Capital Supremacy",
                "Starfighter Assault",
                "Extraction",
                "Strike",
            ],
        },
        {
            isEventRunning: (date: Date) =>
                isWednesday(date) || (isThursday(date) && date.getHours() < 6),
            getEndOfEvent: (date: Date) => {
                if (isWednesday(date)) {
                    return addHours(endOfDay(date), 6);
                } else if (isThursday(date) && date.getHours() < 6) {
                    return addHours(startOfDay(date), 6);
                }

                throw new Error("This should never happen");
            },
            name: "Midweek Boost",
            description: "Triple XP for faster ranking progression.",
            gameModes: ["All game modes"],
        },
        {
            isEventRunning: (date: Date) =>
                isFriday(date) || (isSaturday(date) && date.getHours() < 6),
            getEndOfEvent: (date: Date) => {
                if (isFriday(date)) {
                    return addHours(endOfDay(date), 6);
                } else if (isSaturday(date) && date.getHours() < 6) {
                    return addHours(startOfDay(date), 6);
                }

                throw new Error("This should never happen");
            },
            name: "Battle Point Event",
            description:
                "Lower Battle Point costs for all reinforcements and increased numbers allowed at a time.",
            gameModes: [
                "Galactic Assault",
                "Capital Supremacy",
                "Extraction",
                "Strike",
            ],
        },
        {
            isEventRunning: (date: Date) =>
                (isSaturday(date) || isSunday(date),
            getEndOfEvent: (date: Date) => {
                if (isSaturday(date)) {
                    return addHours(endOfDay(date), 24);
                } else if (isSunday(date)) {
                    return endOfDay(date);
                }

                throw new Error("This should never happen");
            },
            name: "Weekend Boost",
            description: "Double XP for faster ranking progression.",
            gameModes: ["All game modes"],
        },
    ];

    const getNow = () => toZonedTime(new Date(), "Europe/Stockholm"); // everything must be in CET since Dice is based in Sweden
    // const getNow = () => new Date("Wed May 5 2022 2:00:00 GMT-0500"); // Test date, for testing

    const findNextEvent = (now: Date) => {
        let nextEvent;
        let nextEventDate = startOfDay(now);
        do {
            nextEventDate = addDays(nextEventDate, 1);
            nextEvent = events.find((event) =>
                event.isEventRunning(nextEventDate)
            );
        } while (!nextEvent);

        return { nextEvent, nextEventDate };
    };

    // See https://stackoverflow.com/a/36592979/3438861
    const setIntervalImmediately = (func: () => void, interval: number) => {
        func();
        return setInterval(func, interval);
    };

    type ArrayElement<A> = A extends readonly (infer T)[] ? T : never;

    const createCountdown = ({
        event,
        countdownDate,
        countdownText,
        doneText,
    }: {
        event: ArrayElement<typeof events>;
        countdownDate: Date;
        countdownText: string;
        doneText: string;
    }) => {
        const countdown = setIntervalImmediately(() => {
            // Need to get new time every interval
            const nowTime = getNow().getTime();

            // Set the date we're counting down to
            const countdownTime = countdownDate.getTime();

            // Find the distance between now and the count down time
            const distance = countdownTime - nowTime;

            // Time calculations for days, hours, minutes and seconds
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor(
                (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
            );
            const minutes = Math.floor(
                (distance % (1000 * 60 * 60)) / (1000 * 60)
            );
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            const countdownDOM = document.querySelector(".countdown");

            if (!countdownDOM) {
                throw new Error("Could not find required elements in DOM");
            }

            countdownDOM.innerHTML = `${countdownText} ${days}d ${hours}h ${minutes}m ${seconds}s`;

            // If the count down is finished
            if (distance < 0) {
                clearInterval(countdown);
                countdownDOM.innerHTML = doneText;
            }
        }, 1000);
    };

    const now = getNow();

    const todaysEvent = events.find((event) => event.isEventRunning(now));

    const todaysEventNameDOM = document.querySelector("#todays-event-name");

    const todaysEventDescriptionDOM = document.querySelector(
        "#todays-event-description"
    );
    const todaysEventGameModesDOM = document.querySelector(
        "#todays-event-game-modes"
    );

    if (
        !todaysEventNameDOM ||
        !todaysEventDescriptionDOM ||
        !todaysEventGameModesDOM
    ) {
        throw new Error("Couldn't find required elements in DOM");
    }

    if (todaysEvent) {
        const gameModesHTML = todaysEvent.gameModes
            .map((gameMode) => `<span class="badge m-5">${gameMode}</span>`)
            .join("");

        createCountdown({
            event: todaysEvent,
            countdownDate: todaysEvent.getEndOfEvent(now),
            countdownText: "Time remaining: ",
            doneText: "Event ending...",
        });

        todaysEventNameDOM.innerHTML = todaysEvent.name;
        todaysEventDescriptionDOM.innerHTML = todaysEvent.description;
        todaysEventGameModesDOM.innerHTML = gameModesHTML;
    } else {
        const { nextEvent, nextEventDate } = findNextEvent(now);

        createCountdown({
            event: nextEvent,
            countdownDate: nextEventDate,
            countdownText: "In",
            doneText: "Starting now...",
        });

        todaysEventNameDOM.innerHTML = `Next event: ${nextEvent.name}`;
    }
</script>
